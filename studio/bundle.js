!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);class i{constructor(t,e,n,i,o,r,s){this.x=t,this.y=e,this.z=n,this.sizeX=i,this.sizeY=o,this.sizeZ=r,this.color=s}isInCube(t){let e=t[0][0];if(e<this.x||e>this.x+this.sizeX)return!1;if(t[1][0]<this.y||e>this.y+this.sizeY)return!1;let n=t[2][0];return!(n<this.z||n>this.z+this.sizeZ)}onTopRightFrontCorner(t,e,n){return new i(this.x+this.sizeX-t,this.y,this.z+this.sizeZ,t,e,n,this.color)}onTopLeftFrontCorner(t,e,n){return new i(this.x,this.y,this.z+this.sizeZ,t,e,n,this.color)}onRightFrontTopCorner(t,e,n){return new i(this.x+this.sizeX,this.y,this.z+this.sizeZ-n,t,e,n,this.color)}onRightFrontBottomCorner(t,e,n){return new i(this.x+this.sizeX,this.y,this.z,t,e,n,this.color)}onTopRightEndCorner(t,e,n){return new i(this.x+this.sizeX-t,this.y+this.sizeY-e,this.z+this.sizeZ,t,e,n,this.color)}onTopLeftEndCorner(t,e,n){return new i(this.x,this.y+this.sizeY-e,this.z+this.sizeZ,t,e,n,this.color)}inFrontBottomLeftCorner(t,e,n){return new i(this.x,this.y-e,this.z,t,e,n,this.color)}inFrontBottomRightCorner(t,e,n){return new i(this.x+this.sizeX-t,this.y-e,this.z,t,e,n,this.color)}behindBottomLeftCorner(t,e,n){return new i(this.x,this.y+this.sizeY,this.z,t,e,n,this.color)}pushY(t){return this.y+=t,this}pushX(t){return this.x+=t,this}pointA(){return[[this.x],[this.y],[this.z]]}pointB(){return[[this.x+this.sizeX],[this.y],[this.z]]}pointC(){return[[this.x+this.sizeX],[this.y+this.sizeY],[this.z]]}pointD(){return[[this.x],[this.y+this.sizeY],[this.z]]}pointE(){return[[this.x],[this.y],[this.z+this.sizeZ]]}pointF(){return[[this.x+this.sizeX],[this.y],[this.z+this.sizeZ]]}pointG(){return[[this.x+this.sizeX],[this.y+this.sizeY],[this.z+this.sizeZ]]}pointH(){return[[this.x],[this.y+this.sizeY],[this.z+this.sizeZ]]}allPoints(){return[this.pointA(),this.pointB(),this.pointC(),this.pointD(),this.pointE(),this.pointF(),this.pointG(),this.pointH()]}}function o(t,e){let n=[];for(let i=0;i<t;i++){let t=[];for(let n=0;n<e;n++)t.push(0);n.push(t)}return n}function r(t){let e=t.length,n=t[0].length,i=o(e,n);for(let o=0;o<e;o++)for(let e=0;e<n;e++)i[o][e]=t[o][e];return i}function s(t,e){let n=t.length,i=t[0].length;for(let o=0;o<n;o++)for(let n=0;n<i;n++)if(Math.abs(t[o][n]-e[o][n])>1e-4)return!1;return!0}function h(t,e){let n=t.length,i=e[0].length,r=o(n,i);for(let o=0;o<n;o++)for(let n=0;n<i;n++)for(let i=0;i<e.length;i++)r[o][n]+=t[o][i]*e[i][n];return r}function l(t,e){let n=e.length,i=e[0].length,r=o(n,i);for(let o=0;o<n;o++)for(let n=0;n<i;n++)r[o][n]=t*e[o][n];return r}function u(t,e){let n=t.length,i=e[0].length,r=o(n,i);for(let o=0;o<n;o++)for(let n=0;n<i;n++)r[o][n]=t[o][n]-e[o][n];return r}function c(t,e){let n=t.length,i=e[0].length,r=o(n,i);for(let o=0;o<n;o++)for(let n=0;n<i;n++)r[o][n]=t[o][n]+e[o][n];return r}class a{constructor(t,e,n,i,o,r,s){this.canvas=t,this.context=t.getContext("2d"),this.angles=[0,0,0],this.angles=[2*e*Math.PI,2*n*Math.PI,2*i*Math.PI],this.rotationCenter=[[this.canvas.width/2],[0],[this.canvas.height]],this.projectionCenter=[[o*this.canvas.width],[500*r],[s*this.canvas.height]]}rotatePoint(t,e){let n=t;if(e){let t=n[1][0];(n=r(n))[1][0]=2*this.projectionCenter[1][0],n=u(n,this.projectionCenter),n=l(t/this.projectionCenter[1][0],n)}else n=u(t,this.rotationCenter);let i=e?-1:1,o=[i*this.angles[0],i*this.angles[1],i*this.angles[2]],s=[[1,0,0],[0,Math.cos(o[0]),-Math.sin(o[0])],[0,Math.sin(o[0]),Math.cos(o[0])]],a=[[Math.cos(o[1]),0,-Math.sin(o[1])],[0,1,0],[Math.sin(o[1]),0,Math.cos(o[1])]],f=[[Math.cos(o[2]),-Math.sin(o[2]),0],[Math.sin(o[2]),Math.cos(o[2]),0],[0,0,1]],p=n;if(e)p=h(f,p),p=h(a,p),p=c(p=h(s,p),this.rotationCenter);else{p=h(s,p),p=h(a,p);let t=(p=h(f,p))[1][0];(p=c(p=l(this.projectionCenter[1][0]/t,p),this.projectionCenter))[1][0]=t}return p}renderCamera(){let t=this.canvas.height-this.rotationCenter[2];this.context.beginPath(),this.context.arc(this.rotationCenter[0],t,8,0,2*Math.PI),this.context.stroke()}renderCube(t){this.context.fillStyle=t.color;let e=t.allPoints(),n=[],i=[];for(let o=0;o<e.length;o++){let h=e[o],l=this.rotatePoint(h,!1),u=r(l);u[1][0]-=1,u=this.rotatePoint(u,!0);let c=t.isInCube(u);n.push(c),s(h,this.rotatePoint(l,!0))||console.log("Rotation is wrong"),i.push(l)}this.segments=[[0,1],[0,3],[0,4],[1,2],[1,5],[2,3],[2,6],[3,7],[4,5],[4,7],[5,6],[6,7]];for(let t=0;t<this.segments.length;t++){let e=this.segments[t],o=n[e[0]]||n[e[1]];this.drawLine(i[e[0]],i[e[1]],o)}}drawLine(t,e,n){n?this.context.setLineDash([5,3]):this.context.setLineDash([]),this.context.beginPath(),this.context.moveTo(t[0][0],this.canvas.height-t[2][0]),this.context.lineTo(e[0][0],this.canvas.height-e[2][0]),this.context.stroke()}render(t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle="#D3D3D3",this.context.fillRect(0,0,this.canvas.width,this.canvas.height);for(let e=0;e<t.length;e++)this.renderCube(t[e])}}var f=document.getElementById("gameArea");f.height=666,f.width=1397;let p=new i(1138.5,1010,0,100,400,10,"#FF0000"),g=p.inFrontBottomLeftCorner(100,10,100),d=p.behindBottomLeftCorner(100,10,100),z=p.onRightFrontBottomCorner(10,400,100),C=p.onTopRightFrontCorner(120,190,50),y=C.onTopRightFrontCorner(40,190,70),x=p.onTopRightEndCorner(120,190,50),m=[p,g,d,z,C,y,x.onTopRightFrontCorner(40,190,70),x],F=new i(748.5,1450,0,500,500,50,"#FF0000"),v=F.onTopRightFrontCorner(80,175,25).pushY(50),T=F.onTopRightEndCorner(80,175,25).pushY(-50),b=[F,v,T],w=new i(148.5,1450,0,80,300,120,"#FF0000"),B=w.onTopLeftFrontCorner(40,300,30),M=w.onRightFrontTopCorner(60,300,10),L=[w,B,M],Y=w.inFrontBottomLeftCorner(10,10,10).pushY(-50),R=w.inFrontBottomRightCorner(10,10,10).pushY(-50),P=Y.inFrontBottomLeftCorner(10,10,10).pushY(-150),j=R.inFrontBottomLeftCorner(10,10,10).pushY(-150),X=P,E=P.onTopLeftFrontCorner(80,170,10),I=[Y,R,P,j,E];for(let t=0;t<3;t++)Y=E.onTopLeftFrontCorner(10,10,40),R=E.onTopRightFrontCorner(10,10,40),P=E.onTopRightEndCorner(10,10,40),j=E.onTopLeftEndCorner(10,10,40),E=Y.onTopLeftFrontCorner(80,170,10),I=I.concat([Y,R,P,j,E]);let Z=X.inFrontBottomLeftCorner(50,300,70).pushY(-50).pushX(20),D=Z.onTopLeftFrontCorner(10,250,110).pushX(25).pushY(25),O=m.concat(b).concat(L).concat(I).concat([Z,D]);!function t(){let e=document.getElementById("rotationX").value,n=document.getElementById("rotationY").value,i=document.getElementById("rotationZ").value,o=document.getElementById("projX").value,r=document.getElementById("projY").value,s=document.getElementById("projZ").value;new a(f,e,n,i,o,r,s).render(O),setTimeout(t,40)}()}]);